{% extends 'base.html' %}

{% block title %}Feed - Red Social Deportistas{% endblock %}

{% block content %}
<div class="welcome-banner">
  <h1>
    <i class="fas fa-running"></i>
    {% if session.get('user_id') %}
      ¡Hola, {{ session.get('user_id') }}!
    {% else %}
      Bienvenido al Feed
    {% endif %}
  </h1>
  <p>Explora rápidamente la información de los microservicios.</p>
</div>

{% set items = [] %}
{% if publicaciones %}
  {% if publicaciones.data is defined %}
    {% set items = publicaciones.data %}
  {% else %}
    {% set items = publicaciones %}
  {% endif %}
{% endif %}

<div class="card">
  <h3><i class="fas fa-bolt"></i> Actividad reciente</h3>
  {% if items %}
    <ul style="margin-top: 1rem; list-style: none; padding: 0;">
      {% for publicacion in items[:5] %}
        <li style="padding: 0.75rem 0; border-bottom: 1px solid #eee;">
          <strong>{{ publicacion.titulo or 'Publicación' }}</strong><br />
          <small style="color: #777;">
            {{ publicacion.contenido or 'Sin contenido disponible' }}
          </small>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p style="color: #777; margin-top: 0.5rem;">Sin registros aún.</p>
  {% endif %}

  <div class="btn-group" style="margin-top: 1.5rem;">
    <a href="{{ url_for('lista_publicaciones') }}" class="btn">
      <i class="fas fa-newspaper"></i> Publicaciones
    </a>
    <a href="{{ url_for('lista_eventos') }}" class="btn btn-secondary">
      <i class="fas fa-calendar-alt"></i> Eventos
    </a>
  </div>
</div>
{% endblock %}
