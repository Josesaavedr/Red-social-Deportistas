{% extends 'base.html' %}

{% block title %}Perfil de {{ username }} - Red Social Deportistas{% endblock %}

{% block extra_css %}
<style>
  .profile-hero {
    background: linear-gradient(120deg, rgba(102,126,234,.9), rgba(118,75,162,.9)),
      url("{{ profile.cover_url }}") center/cover;
    color: white;
    border-radius: 18px;
    padding: 2.5rem;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
  }
  .profile-avatar {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    border: 5px solid rgba(255,255,255,0.7);
    background: rgba(255,255,255,0.9);
    object-fit: cover;
  }
  .badge-pill {
    background: rgba(255,255,255,0.2);
    padding: .4rem 1rem;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    gap: .35rem;
    margin-right: .5rem;
    margin-bottom: .5rem;
  }
  .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }
  .highlight-card {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    border: 1px solid #eee;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
  }
  .timeline-item {
    border-left: 3px solid var(--primary-color);
    padding-left: 1rem;
    margin-bottom: 1rem;
  }
  .timeline-item:last-child { margin-bottom: 0; }
  .social-links a {
    display: inline-flex;
    align-items: center;
    gap: .4rem;
    padding: .55rem 1rem;
    border-radius: 999px;
    color: white;
    text-decoration: none;
  }
  .social-links a:hover { opacity: .9; }
  .section-title {
    margin-bottom: 1rem;
    color: var(--primary-color);
    display: flex;
    align-items: center;
    gap: .5rem;
  }
</style>
{% endblock %}

{% block content %}
<div style="max-width: 1100px; margin: 0 auto; display: flex; flex-direction: column; gap: 1.5rem;">
  <div class="profile-hero">
    <div style="display: flex; gap: 1.5rem; align-items: center; flex-wrap: wrap;">
      <img src="{{ profile.photo_url }}" alt="Foto de {{ username }}" class="profile-avatar" />
      <div style="flex: 1; min-width: 260px;">
        <h1 style="margin: 0; font-size: 2.2rem;">{{ profile.full_name or username }}</h1>
        <p style="margin: .3rem 0 1rem 0; opacity: .85;">{{ profile.headline }}</p>
        <div>
          <span class="badge-pill"><i class="fas fa-dumbbell"></i> {{ profile.sport }}</span>
          <span class="badge-pill"><i class="fas fa-signal"></i> {{ profile.level }}</span>
          <span class="badge-pill"><i class="fas fa-map-marker-alt"></i> {{ profile.location }}</span>
        </div>
      </div>
      <div class="btn-group" style="flex-wrap: wrap;">
        <a href="{{ url_for('editar_perfil') }}" class="btn btn-secondary"><i class="fas fa-user-edit"></i> Editar Perfil</a>
        <a href="{{ url_for('crear_publicacion') }}" class="btn"><i class="fas fa-plus"></i> Nueva Publicación</a>
        <a href="{{ url_for('crear_evento') }}" class="btn btn-success"><i class="fas fa-calendar-plus"></i> Nuevo Evento</a>
      </div>
    </div>
  </div>

  <div class="info-grid">
    <div class="highlight-card">
      <h3 class="section-title"><i class="fas fa-chart-line"></i> Actividad</h3>
      <div class="info-grid">
        <div>
          <strong style="font-size: 1.8rem;">{{ stats.publicaciones }}</strong>
          <p style="margin: 0; color: #777;">Publicaciones</p>
        </div>
        <div>
          <strong style="font-size: 1.8rem;">{{ stats.eventos }}</strong>
          <p style="margin: 0; color: #777;">Eventos</p>
        </div>
      </div>
    </div>

    <div class="highlight-card">
      <h3 class="section-title"><i class="fas fa-user"></i> Sobre mí</h3>
      <p style="color: #555;">{{ profile.bio }}</p>
      {% if profile.interests %}
      <div style="margin-top: 1rem; display: flex; flex-wrap: wrap; gap: .5rem;">
        {% for tag in profile.interests %}
        <span class="badge-pill" style="color: var(--primary-color); background: rgba(102,126,234,.15);">#{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </div>

  <div class="highlight-card">
    <h3 class="section-title"><i class="fas fa-share-alt"></i> Redes y contacto</h3>
    <div class="social-links" style="display: flex; flex-wrap: wrap; gap: .75rem;">
      {% if profile.website %}
      <a href="{{ profile.website }}" target="_blank" style="background: var(--primary-color);"><i class="fas fa-globe"></i> Sitio web</a>
      {% endif %}
      {% if profile.instagram %}
      <a href="https://instagram.com/{{ profile.instagram }}" target="_blank" style="background: #e1306c;"><i class="fab fa-instagram"></i> Instagram</a>
      {% endif %}
      {% if profile.twitter %}
      <a href="https://twitter.com/{{ profile.twitter }}" target="_blank" style="background: #1DA1F2;"><i class="fab fa-twitter"></i> Twitter</a>
      {% endif %}
      {% if not profile.website and not profile.instagram and not profile.twitter %}
      <p style="color: #777; margin: 0;">Aún no has agregado redes sociales.</p>
      {% endif %}
    </div>
  </div>

  <div class="info-grid">
    <div class="highlight-card">
      <h3 class="section-title"><i class="fas fa-newspaper"></i> Tus publicaciones</h3>
      {% if publicaciones %}
        {% for pub in publicaciones %}
        <div class="timeline-item">
          <strong>{{ pub.titulo }}</strong>
          <p style="margin:.3rem 0; color:#666;">{{ pub.contenido }}</p>
          <small style="color:#999;"><i class="fas fa-clock"></i> {{ pub.fecha }}</small>
        </div>
        {% endfor %}
      {% else %}
        <p style="color:#777;">Aún no has creado publicaciones. ¡Comparte tu primera historia!</p>
      {% endif %}
    </div>

    <div class="highlight-card">
      <h3 class="section-title"><i class="fas fa-calendar-alt"></i> Eventos creados</h3>
      {% if eventos %}
        {% for ev in eventos %}
        <div class="timeline-item">
          <strong>{{ ev.nombre }}</strong>
          <p style="margin:.3rem 0; color:#666;">{{ ev.descripcion }}</p>
          <small style="color:#999;"><i class="fas fa-calendar"></i> {{ ev.fecha }} · {{ ev.organizador }}</small>
        </div>
        {% endfor %}
      {% else %}
        <p style="color:#777;">Organiza un evento y compártelo con la comunidad.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
